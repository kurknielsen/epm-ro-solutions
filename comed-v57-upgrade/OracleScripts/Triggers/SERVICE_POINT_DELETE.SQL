CREATE OR REPLACE TRIGGER SERVICE_POINT_DELETE
	AFTER DELETE ON SERVICE_POINT
	FOR EACH ROW
BEGIN
	UPDATE MARKET_PRICE SET POD_ID = 0 WHERE POD_ID = :old.SERVICE_POINT_ID;
	UPDATE INTERCHANGE_TRANSACTION SET POD_ID = 0 WHERE POD_ID = :old.SERVICE_POINT_ID;
	UPDATE INTERCHANGE_TRANSACTION SET POR_ID = 0 WHERE POR_ID = :old.SERVICE_POINT_ID;
	UPDATE COMPONENT_IMBALANCE SET SERVICE_POINT_ID = 0 WHERE SERVICE_POINT_ID = :old.SERVICE_POINT_ID;
	UPDATE SERVICE_LOCATION SET SERVICE_POINT_ID = 0 WHERE SERVICE_POINT_ID = :old.SERVICE_POINT_ID;
	UPDATE TX_SEGMENT SET POD_ID = 0 WHERE POD_ID = :old.SERVICE_POINT_ID;
	UPDATE TX_SEGMENT SET POR_ID = 0 WHERE POR_ID = :old.SERVICE_POINT_ID;
	DELETE PORTFOLIO_SERVICE_POINT WHERE SERVICE_POINT_ID = :old.SERVICE_POINT_ID;
END SERVICE_POINT_DELETE;
/
