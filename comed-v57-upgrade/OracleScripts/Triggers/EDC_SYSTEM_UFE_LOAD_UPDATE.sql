CREATE OR REPLACE TRIGGER EDC_SYSTEM_UFE_LOAD_UPDATE
	BEFORE INSERT OR UPDATE ON EDC_SYSTEM_UFE_LOAD
	FOR EACH ROW
BEGIN
	IF :new.LOAD_CODE = GA.FORECAST_SERVICE AND NOT GA.VERSION_FORECAST THEN
		:new.AS_OF_DATE := LOW_DATE;
	ELSIF :new.LOAD_CODE = GA.BACKCAST_SERVICE AND NOT GA.VERSION_BACKCAST THEN
		:new.AS_OF_DATE := LOW_DATE;
	ELSIF :new.LOAD_CODE = GA.ACTUAL_SERVICE AND NOT GA.VERSION_ACTUAL THEN
		:new.AS_OF_DATE := LOW_DATE;
	END IF;
END EDC_SYSTEM_UFE_LOAD_UPDATE;
/ 
