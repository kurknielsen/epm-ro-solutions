CREATE OR REPLACE FUNCTION HAS_ACCESS_CHAR
	(
	p_DOMAIN_NAME IN VARCHAR,
	p_ACCESS_TYPE IN VARCHAR
	) RETURN VARCHAR IS
--Revision: $Revision: 1.17 $

-- Answer TRUE if the user can read from the specified domain; otherwise answer FALSE.
-- Access Codes: S - Select, U - update, D - delete

v_ACCESS_CODE NUMBER(1);
v_HAS_ACCESS VARCHAR(8);

BEGIN

	v_HAS_ACCESS := 'FALSE';
	IF UPPER(p_ACCESS_TYPE) = 'READ' OR UPPER(p_ACCESS_TYPE) = 'SELECT' THEN
	    IF CAN_READ(p_DOMAIN_NAME) THEN
		    v_HAS_ACCESS := 'TRUE';
		END IF;
	ELSIF UPPER(p_ACCESS_TYPE) = 'WRITE' OR UPPER(p_ACCESS_TYPE) = 'UPDATE' THEN
		IF CAN_WRITE(p_DOMAIN_NAME) THEN
		    v_HAS_ACCESS := 'TRUE';
		END IF;
	ELSIF UPPER(p_ACCESS_TYPE) = 'DELETE' THEN
		IF CAN_DELETE(p_DOMAIN_NAME) THEN
		    v_HAS_ACCESS := 'TRUE';
		END IF;
	END IF;

	RETURN v_HAS_ACCESS;

EXCEPTION
	WHEN OTHERS THEN
		RETURN 'FALSE';
END HAS_ACCESS_CHAR;
/

