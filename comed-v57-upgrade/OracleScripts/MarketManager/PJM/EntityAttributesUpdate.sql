DECLARE
	v_ATTRIBUTE_ID NUMBER(9);
    v_RESOURCE_ID  NUMBER(9);
    v_STATUS       NUMBER;
BEGIN
    
    v_STATUS := GA.SUCCESS;
    --create a new entity attribute for 
    ID.ID_FOR_ENTITY_ATTRIBUTE('UNIT_TYPE', 'RESOURCE', 'String', TRUE, v_ATTRIBUTE_ID);
    COMMIT;
    
    IF v_ATTRIBUTE_ID <= 0 THEN
		v_STATUS := -1;
		RETURN;
	END IF;
    
    BEGIN
        SELECT RESOURCE_ID INTO v_RESOURCE_ID FROM SUPPLY_RESOURCE WHERE UPPER(RESOURCE_NAME) LIKE '%BATH%';
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            v_RESOURCE_ID := -1;
    END;
    
    IF v_RESOURCE_ID > 0 THEN
        RO.PUT_ENTITY_ATTRIBUTE('UNIT_TYPE', 'RESOURCE', 'String', v_RESOURCE_ID, DATE'2000-01-01', NULL, 'Pumped Storage Hydro', v_STATUS);
		UPDATE TEMPORAL_ENTITY_ATTRIBUTE SET ENTITY_DOMAIN_ID=-670 WHERE OWNER_ENTITY_ID=v_RESOURCE_ID AND ATTRIBUTE_ID=v_ATTRIBUTE_ID;
    END IF;
    
    EXCEPTION
	    WHEN OTHERS THEN
			v_STATUS := SQLCODE;
END;
/

commit;