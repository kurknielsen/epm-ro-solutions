CREATE OR REPLACE PROCEDURE DAYLIGHT_SAVINGS_TIME
	(
	p_LOCAL_DATE IN DATE,
	p_IS_DAYLIGHT_SAVINGS OUT BOOLEAN,
	p_IS_TIME_CHANGE_DAY OUT BOOLEAN
	)
	AS
--Revsion: $Revision: 1.18 $
--c Analyze the specified date and return whether it is in the DST time period
--c and whether the date falls on one of the two time change days.
--c The P_LOCAL_DATE is a STD time.

v_DST_SPRING_AHEAD_DATE DATE;
v_DST_FALL_BACK_DATE DATE;

BEGIN

	v_DST_SPRING_AHEAD_DATE := DST_SPRING_AHEAD_DATE(p_LOCAL_DATE);
	v_DST_FALL_BACK_DATE := DST_FALL_BACK_DATE(p_LOCAL_DATE);

	p_IS_DAYLIGHT_SAVINGS := p_LOCAL_DATE BETWEEN v_DST_SPRING_AHEAD_DATE AND ADD_SECONDS_TO_DATE(v_DST_FALL_BACK_DATE, -1);

	p_IS_TIME_CHANGE_DAY := (p_LOCAL_DATE BETWEEN ADD_MINUTES_TO_DATE(TRUNC(v_DST_SPRING_AHEAD_DATE),1) AND ADD_HOURS_TO_DATE(TRUNC(v_DST_SPRING_AHEAD_DATE), 23))
		OR (p_LOCAL_DATE BETWEEN ADD_MINUTES_TO_DATE(TRUNC(v_DST_FALL_BACK_DATE),-59) AND TRUNC(v_DST_FALL_BACK_DATE) + 1);

END DAYLIGHT_SAVINGS_TIME;
/

