CREATE OR REPLACE FUNCTION APP_SCHEMA_NAME RETURN VARCHAR2 IS
--Revision: $Revision: 1.2 $
v_STACK VARCHAR2(4000);
v_IDX1 BINARY_INTEGER;
v_IDX2 BINARY_INTEGER;
v_RET VARCHAR2(64);
BEGIN
    v_STACK := DBMS_UTILITY.FORMAT_CALL_STACK;
    v_IDX1 := INSTR(v_STACK, '.APP_SCHEMA_NAME'); -- we know we are executing this
    v_IDX2 := INSTR(v_STACK, ' ', -LENGTH(v_STACK)+v_IDX1);
    v_RET := SUBSTR(v_STACK, v_IDX2+1, v_IDX1-v_IDX2-1);
    RETURN v_RET;
END APP_SCHEMA_NAME;
/
