--
-- FILE: NYISO_OBJECTS.SQL
-- Purpose : This file contains object types used for fetch data from NYISO Market Interfaces
--

--========================
--      Load types
--========================
CREATE OR REPLACE TYPE MEX_NY_LOAD AS OBJECT
(
  ZONE_ID	VARCHAR2(16),
  ZONE_NAME	VARCHAR2(32),
  SCHEDULES MEX_SCHEDULE_TBL
);
/
CREATE OR REPLACE TYPE MEX_NY_LOAD_TBL AS TABLE OF MEX_NY_LOAD;
/
--========================
--  LBMP types
--========================
CREATE OR REPLACE TYPE MEX_NY_LBMP_COST AS OBJECT
(
  CUT_TIME DATE,
  LBMP_COST  NUMBER,
	MC_LOSSES  NUMBER,
	MC_CONGESTION  NUMBER,
  SCARCITY_FLAG CHAR(1)
);
/
CREATE OR REPLACE TYPE MEX_NY_LBMP_COST_TBL AS TABLE OF MEX_NY_LBMP_COST;
/
CREATE OR REPLACE TYPE MEX_NY_LBMP AS OBJECT
(
 ENTITY_NAME VARCHAR2(32),
 ENTITY_ID   VARCHAR2(16),
 COSTS       MEX_NY_LBMP_COST_TBL
 );
/
CREATE OR REPLACE TYPE MEX_NY_LBMP_TBL AS TABLE OF MEX_NY_LBMP;
/
--========================
--  ATC/TTC types
--========================

CREATE OR REPLACE TYPE MEX_NY_XFER_CAP_SCHEDS AS OBJECT
(
	INTERFACE_NAME VARCHAR2(32),
	TTC_DAM_SCHED MEX_SCHEDULE_TBL,
	ATC_DAM_FIRMS_SCHED MEX_SCHEDULE_TBL, -- w/o non-firms
	ATC_DAM_TOTAL_SCHED MEX_SCHEDULE_TBL, -- w/ non-firms
	TTC_HAM_SCHED MEX_SCHEDULE_TBL,
	ATC_HAM_FIRMS_SCHED MEX_SCHEDULE_TBL, -- w/o non-firms
	ATC_HAM_TOTAL_SCHED MEX_SCHEDULE_TBL  -- w/ non-firms
 );
/
CREATE OR REPLACE TYPE MEX_NY_XFER_CAP_SCHEDS_TBL AS TABLE OF MEX_NY_XFER_CAP_SCHEDS; 
/
--========================
--  PHYSICAL LOAD types
--========================
CREATE OR REPLACE TYPE MEX_NY_PHYSICAL_LOAD AS OBJECT
(
  LOAD_NAME                  VARCHAR2(32),
  LOAD_NID                   NUMBER,
  LOAD_DATE                  DATE,
  FORECAST_MW                NUMBER (6,1),
  FIXED_MW                   NUMBER (6,1),
  PRICE_CAP_1_MW             NUMBER (6,1),
  PRICE_CAP_1_DOLLAR         NUMBER (6,2), 
  PRICE_CAP_2_MW             NUMBER (6,1),
  PRICE_CAP_2_DOLLAR         NUMBER (6,2),
  PRICE_CAP_3_MW             NUMBER (6,1),
  PRICE_CAP_3_DOLLAR         NUMBER (6,2),
  INTERRUPTIBLE_TYPE         VARCHAR2(10),
  INTERRUPTIBLE_FIXED_MW     NUMBER (6,1), 
  INTERRUPTIBLE_FIXED_COST   NUMBER (6,2),
  INTERRUPTIBLE_CAPPED_MW    NUMBER (6,1),
  INTERRUPTIBLE_CAPPED_COST  NUMBER (6,2),
  BID_NID                    NUMBER,
  SCHED_PRICE_CAPPED         NUMBER (6,1),
  SCHED_INTERRUPTIBLE_FIXED  NUMBER (6,1),
  SCHED_INTERRUPTIBLE_CAPPED NUMBER (6,1),
  UPDATE_USER_IDENT          VARCHAR2(32), 
  UPDATE_TIME                DATE, 
  BID_STATUS                 VARCHAR2(20), 
  MESSAGE                    VARCHAR2(1000)
);
/
CREATE OR REPLACE TYPE MEX_NY_PHYSICAL_LOAD_TBL AS TABLE OF MEX_NY_PHYSICAL_LOAD;
/

--========================
--  PTID NODE types
--========================
CREATE OR REPLACE TYPE MEX_NY_PTID_NODE AS OBJECT
(
  PTID           VARCHAR2(32),
  PTID_NAME      VARCHAR2(64),
  PTID_TYPE      VARCHAR2(32),
  ZONE_NAME      VARCHAR2(32),
  SUBZONE_NAME   VARCHAR2(32)
);
/
CREATE OR REPLACE TYPE MEX_NY_PTID_NODE_TBL AS TABLE OF MEX_NY_PTID_NODE;
/

--=======================
--  SETTLEMENT types
--=======================
CREATE OR REPLACE TYPE MEX_NY_DOC_IDENT AS OBJECT
(
    DOC_ID    VARCHAR2(6),
    DOC_NAME  VARCHAR2(64),
    DOC_SIZE  VARCHAR2(6),
    DOC_DATE  VARCHAR2(32)
);
/
CREATE OR REPLACE TYPE MEX_NY_DOC_IDENT_TBL AS TABLE OF MEX_NY_DOC_IDENT;
/

CREATE OR REPLACE TYPE MEX_NY_INVOICE AS OBJECT
(
    INVOICE_VERSION     NUMBER(1),
    INV_POSTED_IND      VARCHAR2(1),
    INV_BILLING_MONTH   VARCHAR2(10),
    SETTL_TYPE_DESC     VARCHAR2(20),
    INV_ID              VARCHAR2(4)
);
/
CREATE OR REPLACE TYPE MEX_NY_INVOICE_TBL AS TABLE OF MEX_NY_INVOICE;
/

CREATE OR REPLACE TYPE MEX_NY_RATES AS OBJECT
(
    INVOICE_VERSION NUMBER(1),
    CHARGE_DATE   	DATE,
    MST_RATE		NUMBER,
    OATT_RATE		NUMBER,
    VSS_RATE		NUMBER,
    RT_LSE_LOAD		NUMBER,
    MST_STLM        NUMBER,
    OATT_STLM       NUMBER,
    VSS_STLM        NUMBER    
);
/
CREATE OR REPLACE TYPE MEX_NY_RATES_TBL AS TABLE OF MEX_NY_RATES;
/
CREATE OR REPLACE TYPE MEX_NY_DAM_ENERGY AS OBJECT
(
    INVOICE_VERSION     NUMBER(1),
    SERVICE_POINT_ID	VARCHAR2(32),
    CHARGE_DATE   	    DATE,
    LMBP_DAM_ENERGY	    NUMBER,
    LMBP_DAM_LOSS	    NUMBER,
    LMBP_DAM_CONG	    NUMBER,
    DAM_SCH_LOAD	    NUMBER,
    TOTAL_DAM_STLM      NUMBER
);
/
CREATE OR REPLACE TYPE MEX_NY_DAM_ENERGY_TBL AS TABLE OF MEX_NY_DAM_ENERGY;
/

CREATE OR REPLACE TYPE MEX_NY_BAL_MKT_EN AS OBJECT
(
    INVOICE_VERSION     NUMBER(1),
    SERVICE_POINT_ID	VARCHAR2(32),
    CHARGE_DATE   	    DATE,
    BAL_MKT_ENRG_STLM   NUMBER,
    BAL_MKT_LOSS_STLM   NUMBER,
    BAL_MKT_CONG_STLM   NUMBER,
    TOTAL_BAL_MKT_STLM  NUMBER,
    BAL_MKT_LOAD        NUMBER,
    DAM_SCHED_LOAD      NUMBER,
    RT_ACTUAL_LOAD      NUMBER
);
/
CREATE OR REPLACE TYPE MEX_NY_BAL_MKT_EN_TBL AS TABLE OF MEX_NY_BAL_MKT_EN;
/


CREATE OR REPLACE TYPE MEX_NY_TOTAL AS OBJECT
(
    INVOICE_VERSION         NUMBER(1),     
    CHARGE_DATE   		    DATE,
    NY_RT_EXPORT_TRANS	    NUMBER,    
    NY_RT_LSE_LOAD		    NUMBER,
    NY_REG_CR_TO_PS		    NUMBER,
    NY_REG_CHG_TO_PS		NUMBER,
    REGULATION_STLM         NUMBER,
    NY_OP_RES_CR_TO_PS  	NUMBER,
    NY_OP_RES_SHTCHG_TO_PS	NUMBER,
    OP_RES_STLM             NUMBER,
    NY_BLACK_START_COST     NUMBER,
    BLACK_START_STLM        NUMBER
);
/
CREATE OR REPLACE TYPE MEX_NY_TOTAL_TBL AS TABLE OF MEX_NY_TOTAL;
/

CREATE OR REPLACE TYPE MEX_NY_RESIDUAL AS OBJECT
(
    INVOICE_VERSION         NUMBER(1), 
    CHARGE_DATE   		    DATE, 
    NY_RT_LSE_LOAD		    NUMBER,    
    NY_RT_EXPORT_TRANS	    NUMBER,
    NY_RT_WT_TRANS		    NUMBER,
    NY_DAM_ENGY_CR_TO_PS	NUMBER,
    NY_DAM_ENGY_CH_TO_LSE 	NUMBER,
    NY_DAM_LMBP_ENGY_CH_TC 	NUMBER,
    NY_DAM_LOSS_CR_TO_PS 	NUMBER,
    NY_DAM_LOSS_CH_TO_LSE 	NUMBER,
    NY_DAM_LMBP_LOSS_CH_TC 	NUMBER,
    NY_DAM_TUC_LOSS_CH_TC 	NUMBER,
    NY_BAL_ENGY_CR_TO_PS 	NUMBER,
    NY_BAL_ENGY_CH_TO_LSE 	NUMBER,
    NY_BAL_LMBP_ENGY_CH_TC 	NUMBER,
    NY_BAL_LOSS_CR_PS 	    NUMBER,
    NY_BAL_LOSS_CH_LSE 	    NUMBER,
    NY_BAL_LMBP_LOSS_CH_TC 	NUMBER,
    NY_BAL_TUC_LOSS_CH_TC 	NUMBER,
    NY_BAL_CONG_CR_TO_PC 	NUMBER,
    NY_BAL_CONG_CH_TO_LSE 	NUMBER,
    NY_BAL_LMBP_CONG_CH_TC 	NUMBER,
    NY_BAL_TUC_CONG_CH_TC 	NUMBER,
    DAM_ENGY_RESID_STLM     NUMBER,
    DAM_LOSS_RESID_STLM     NUMBER,
    BAL_ENGY_RESID_STLM     NUMBER,
    BAL_LOSS_RESID_STLM     NUMBER,
    BAL_CONG_RESID_STLM     NUMBER    
);
/
CREATE OR REPLACE TYPE MEX_NY_RESIDUAL_TBL AS TABLE OF MEX_NY_RESIDUAL;
/

--VIRTUAL MARKET CUSTOMER (DAM $ BALANCING)
CREATE OR REPLACE TYPE MEX_NY_DAM_VIR_SUP AS OBJECT
(
    INVOICE_VERSION	    NUMBER(1),
    VS_BUS_IDENT	    VARCHAR2(32), 
    CHARGE_DATE   	    DATE,
    VS_DAM_ENGY_PRICE   NUMBER,
    VS_DAM_LOSS_PRICE   NUMBER,
    VS_DAM_CONG_PRICE   NUMBER,
    VS_DAM_SUPPLY_ENGY  NUMBER,
    VS_TOTAL_DAM_STLM   NUMBER
);
/
CREATE OR REPLACE TYPE MEX_NY_DAM_VIR_SUP_TBL AS TABLE OF MEX_NY_DAM_VIR_SUP;
/

CREATE OR REPLACE TYPE MEX_NY_DAM_VIR_LOAD AS OBJECT
(
    INVOICE_VERSION	    NUMBER(1),
    VL_BUS_IDENT	    VARCHAR2(32), 
    CHARGE_DATE   	    DATE,
    VL_DAM_ENGY_PRICE   NUMBER,
    VL_DAM_LOSS_PRICE   NUMBER,
    VL_DAM_CONG_PRICE   NUMBER,
    VL_DAM_LOAD_ENGY    NUMBER,
    VL_TOTAL_DAM_STLM   NUMBER
);
/
CREATE OR REPLACE TYPE MEX_NY_DAM_VIR_LOAD_TBL AS TABLE OF MEX_NY_DAM_VIR_LOAD;
/

CREATE OR REPLACE TYPE MEX_NY_BAL_VL AS OBJECT
(
    INVOICE_VERSION    NUMBER(1),
    VL_BUS_IDENT       VARCHAR2(32),
    CHARGE_DATE   	   DATE,
    BAL_VL_ENRG_STLM   NUMBER,
    BAL_VL_LOSS_STLM   NUMBER,
    BAL_VL_CONG_STLM   NUMBER,
    TOTAL_VL_BAL_STLM  NUMBER,
    VL_DAM_LOAD_ENGY   NUMBER
);
/
CREATE OR REPLACE TYPE MEX_NY_BAL_VL_TBL AS TABLE OF MEX_NY_BAL_VL;
/

CREATE OR REPLACE TYPE MEX_NY_BAL_VS AS OBJECT
(
    INVOICE_VERSION    NUMBER(1),
    VS_BUS_IDENT       VARCHAR2(32),
    CHARGE_DATE   	   DATE,
    BAL_VS_ENRG_STLM   NUMBER,
    BAL_VS_LOSS_STLM   NUMBER,
    BAL_VS_CONG_STLM   NUMBER,
    TOTAL_VS_BAL_STLM  NUMBER,
    VS_DAM_SUPPLY_ENGY NUMBER
);
/
CREATE OR REPLACE TYPE MEX_NY_BAL_VS_TBL AS TABLE OF MEX_NY_BAL_VS;
/
