CREATE OR REPLACE TRIGGER POOL_DELETE
	AFTER DELETE ON POOL
	FOR EACH ROW
BEGIN
	UPDATE ACCOUNT_ESP SET POOL_ID = 0 WHERE POOL_ID = :old.POOL_ID;
	UPDATE AGGREGATE_ACCOUNT_ESP SET POOL_ID = 0 WHERE POOL_ID = :old.POOL_ID;
	UPDATE ESP_POOL SET POOL_ID = 0 WHERE POOL_ID = :old.POOL_ID;
	UPDATE INTERCHANGE_TRANSACTION SET POOL_ID = 0 WHERE POOL_ID = :old.POOL_ID;
	UPDATE LOAD_OBLIGATION SET POOL_ID = 0 WHERE POOL_ID = :old.POOL_ID;
	UPDATE POSITION_ANALYSIS_CANDIDATE SET POOL_ID = 0 WHERE POOL_ID = :old.POOL_ID;
	UPDATE SERVICE_DELIVERY SET POOL_ID = 0 WHERE POOL_ID = :old.POOL_ID;
END POOL_DELETE;
/
