CREATE OR REPLACE PACKAGE MM_SEM_SETTLEMENT_CALENDAR IS

-- Author  : PMANNING
-- Created : 5/12/2010 4:41:47 PM
-- Purpose :

FUNCTION GET_PUBLICATION_DATE
	(
	p_PUBLICATION_TYPE IN VARCHAR2,
	p_MARKET           IN VARCHAR2,
	p_RUN_IDENTIFIER   IN VARCHAR2,
	p_SETTLEMENT_DATE  IN DATE
	) RETURN DATE;

FUNCTION GET_RUN_IDENTIFIER_ORDER(p_RUN_IDENTIFIER IN VARCHAR2) RETURN NUMBER;


/*
Returns the best available Run Identifier for the specified
Settlement Date, Publication Type, and Market that is <= the
specified Publication Date.
*/
FUNCTION GET_RUN_IDENTIFIER
	(
	p_PUBLICATION_DATE IN DATE,
	p_PUBLICATION_TYPE IN VARCHAR2,
	p_MARKET           IN VARCHAR2,
	p_SETTLEMENT_DATE  IN DATE
	) RETURN VARCHAR2;

PROCEDURE SETTLEMENT_CALENDAR
	(
	p_BEGIN_DATE       IN DATE,
	p_END_DATE         IN DATE,
	p_PUBLICATION_TYPE IN VARCHAR2,
	p_MARKET           IN VARCHAR2,
	p_RUN_TYPE         IN VARCHAR2,
	p_DATE_OPTION      IN VARCHAR2,
	p_CURSOR           IN OUT GA.REFCURSOR
	);

PROCEDURE PUT_SETTLEMENT_CALENDAR
	(
	p_PUBLICATION_DATE     IN DATE,
	p_PUBLICATION_TYPE     IN VARCHAR2,
	p_MARKET               IN VARCHAR2,
	p_RUN_TYPE             IN VARCHAR2,
	p_BEGIN_DATE           IN DATE,
	p_END_DATE             IN DATE,
	p_RUN_IDENTIFIER       IN VARCHAR2,
	p_OLD_PUBLICATION_DATE IN DATE := NULL,
	p_OLD_PUBLICATION_TYPE IN VARCHAR2 := NULL,
	p_OLD_MARKET           IN VARCHAR2 := NULL,
	p_OLD_RUN_TYPE         IN VARCHAR2 := NULL,
	p_OLD_BEGIN_DATE	   IN DATE := NULL
	);

PROCEDURE DELETE_SETTLEMENT_CALENDAR
	(
	p_PUBLICATION_DATE     IN DATE,
	p_PUBLICATION_TYPE     IN VARCHAR2,
	p_MARKET               IN VARCHAR2,
	p_RUN_TYPE             IN VARCHAR2,
	p_BEGIN_DATE 		   IN DATE
	);

PROCEDURE RUN_IDENTIFIERS(p_CURSOR IN OUT GA.REFCURSOR);

FUNCTION GET_MARKET_NAME_FOR_ABBREV(p_MARKET_ABBREV VARCHAR2) RETURN VARCHAR2;

c_RUN_TYPE_INDICATIVE CONSTANT VARCHAR2(16) := 'Indicative';
c_RUN_TYPE_INITIAL	  CONSTANT VARCHAR2(16) := 'Initial';
c_RUN_TYPE_M4 		  CONSTANT VARCHAR2(16) := 'M+4';
c_RUN_TYPE_M13		  CONSTANT VARCHAR2(16) := 'M+13';
c_RUN_TYPE_ADHOC	  CONSTANT VARCHAR2(16) := 'Adhoc';

c_PUBLICATION_TYPE_REPORT  CONSTANT VARCHAR2(16) := 'Report';
c_PUBLICATION_TYPE_INVOICE CONSTANT VARCHAR2(16) := 'Invoice';

c_MARKET_CAPACITY 	CONSTANT VARCHAR2(16) := 'Capacity';
c_MARKET_ENERGY 	CONSTANT VARCHAR2(16) := 'Energy';
c_MARKET_FMOC 		CONSTANT VARCHAR2(16) := 'FMOC';
c_MARKET_VMOC 		CONSTANT VARCHAR2(16) := 'VMOC';

END MM_SEM_SETTLEMENT_CALENDAR;
/