BEGIN CDI_DROP_OBJECT('CDI_MONTHLY_USAGE_CACHE','TABLE'); END;
/

CREATE GLOBAL TEMPORARY TABLE CDI_MONTHLY_USAGE_CACHE
(
  BILL_ACCOUNT    NUMBER,
  SERVICE_POINT   NUMBER,
  BEGIN_DATE      DATE,
  END_DATE        DATE,
  BILLED_USAGE    NUMBER,
  BILLED_KW       NUMBER,
  READ_CODE       VARCHAR2(2),
  TIME_PERIOD     VARCHAR2(64),
  BGE_TIMESTAMP   TIMESTAMP(6),
  PROCESS_CODE    VARCHAR2(30),
  ERROR_MESSAGE   VARCHAR2(4000),
  PROCESS_DATE    DATE,
  OSUSER          VARCHAR2(30),
  TEMPLATE_ID     NUMBER,
  PERIOD_ID       NUMBER,
  TEMPLATE_NAME   VARCHAR2(64),
  PERIOD_NAME     VARCHAR2(64),
  BGE_BEGIN_DATE  DATE,
  BGE_END_DATE    DATE,
  IS_ALM          INTEGER,
  STAGING_ROWID   VARCHAR2(64),
  AMI_CHECK       VARCHAR2(3)
) ON COMMIT PRESERVE ROWS;

CREATE INDEX IX_CDI_MONTHLY_USAGE_CACHE ON CDI_MONTHLY_USAGE_CACHE(BILL_ACCOUNT, SERVICE_POINT, BEGIN_DATE, END_DATE);
